{% extends "base.html" %}
{% block title %}{{ version }}{% endblock %}

{% block head %}
    <script src='../static/js/Chart.min.js'></script>
{% endblock %}


{% block content %}

    <!-----------------------------      1 ----------------->
    <div class="row">
        <div class="col-12">
            <div class="card card-chart">
                <div class="card-header">
                    <div class="row">
                        <div class="col-sm-6 text-left">
                            <h5 class="card-title">Нагрузка на ИНФО центр по времени</h5>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="chart-area">
                        <canvas id="myChart1"></canvas>
                        <script>
                            var ctx = document.getElementById('myChart1').getContext('2d');
                            var myChart1 = new Chart(ctx, {
                                type: 'line',
                                data: {
                                    labels: [{% for item in data_time_hour %} "{{item[1]}}",  {% endfor %}],
                                    datasets: [{
                                        label: 'Входящие',
                                        data: [{% for item in data_time_hour %} {{item[2]}}, {% endfor %}],
                                        fill: true,
                                        lineTension: 0.3,
                                        backgroundColor: "rgba(75,192,192,0.4)",
                                        borderColor: "rgba(75,192,192,1)",
                                        borderCapStyle: 'butt',
                                        borderDash: [],
                                        borderDashOffset: 0.0,
                                        borderJoinStyle: 'miter',
                                        pointBorderColor: "rgba(75,192,192,1)",
                                        pointBackgroundColor: "#fff",
                                        pointBorderWidth: 1,
                                        pointHoverRadius: 5,
                                        pointHoverBackgroundColor: "rgba(75,192,192,1)",
                                        pointHoverBorderColor: "rgba(220,220,220,1)",
                                        pointHoverBorderWidth: 2,
                                        pointRadius: 1,
                                        pointHitRadius: 10,
                                        spanGaps: false,
                                        borderWidth: 1
                                    }, {
                                        label: 'Исходящие',
                                        data: [{% for item in data_time_hour %} {{item[3]}}, {% endfor %}],
                                        fill: true,
                                        lineTension: 0.3,
                                        backgroundColor: "rgba(123, 104, 238,0.4)",
                                        borderColor: "rgba(123, 104, 238,1)",
                                        borderCapStyle: 'butt',
                                        borderDash: [],
                                        borderDashOffset: 0.0,
                                        borderJoinStyle: 'miter',
                                        pointBorderColor: "rgba(123, 104, 238,1)",
                                        pointBackgroundColor: "#fff",
                                        pointBorderWidth: 1,
                                        pointHoverRadius: 5,
                                        pointHoverBackgroundColor: "rgba(75,192,192,1)",
                                        pointHoverBorderColor: "rgba(220,220,220,1)",
                                        pointHoverBorderWidth: 2,
                                        pointRadius: 1,
                                        pointHitRadius: 10,
                                        spanGaps: false,
                                        borderWidth: 1
                                    }]
                                },
                                options: {
                                    responsive: true,
                                    maintainAspectRatio: false,
                                    layout: {
                                        padding: {
                                            left: 0,
                                            right: 0,
                                            top: 0,
                                            bottom: 0
                                        },
                                        animation: {
                                            duration: 10
                                        }
                                    },

                                    scales: {
                                        xAxes: [
                                            {
                                                scaleLabel: {
                                                    display: true,
                                                    labelString: "Текущие сутки (часы)",
                                                },

                                            }
                                        ],
                                        yAxes: [
                                            {
                                                scaleLabel: {
                                                    display: true,
                                                    labelString: "Общая длительность (часы)",
                                                },

                                            }
                                        ],
                                    }
                                }
                            });
                        </script>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-----------------------------      2 ----------------->
    <div class="row">
        <div class="col-12">
            <div class="card card-chart">
                <div class="card-header">
                    <div class="row">
                        <div class="col-sm-6 text-left">
                            <h5 class="card-title">Нагрузка на ИНФО центр по операторам</h5>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="chart-area">
                        <canvas id="myChart2"></canvas>
                        <script>
                            var ctx = document.getElementById('myChart2').getContext('2d');
                            var myChart2 = new Chart(ctx, {
                                type: 'bar',
                                data: {
                                    labels: [
                                        {% for item in data_total_time_oper %} "{{item[1]}}",  {% endfor %}],
                                    datasets: [{
                                        label: 'Входящие',
                                        data: [
                                            {% for item in data_total_time_oper %} {{item[2]}}, {% endfor %}],
                                        fill: true,
                                        lineTension: 0.3,
                                        backgroundColor: "rgba(75,192,192,0.4)",
                                        borderColor: "rgba(75,192,192,1)",
                                        borderCapStyle: 'butt',
                                        borderDash: [],
                                        borderDashOffset: 0.0,
                                        borderJoinStyle: 'miter',
                                        pointBorderColor: "rgba(75,192,192,1)",
                                        pointBackgroundColor: "#fff",
                                        pointBorderWidth: 1,
                                        pointHoverRadius: 5,
                                        pointHoverBackgroundColor: "rgba(75,192,192,1)",
                                        pointHoverBorderColor: "rgba(220,220,220,1)",
                                        pointHoverBorderWidth: 2,
                                        pointRadius: 1,
                                        pointHitRadius: 10,
                                        spanGaps: false,
                                        borderWidth: 1
                                    }, {
                                        label: 'Исходящие',
                                        data: [
                                            {% for item in data_total_time_oper %} {{item[3]}}, {% endfor %}],
                                        fill: true,
                                        lineTension: 0.3,
                                        backgroundColor: "rgba(123, 104, 238,0.4)",
                                        borderColor: "rgba(123, 104, 238,1)",
                                        borderCapStyle: 'butt',
                                        borderDash: [],
                                        borderDashOffset: 0.0,
                                        borderJoinStyle: 'miter',
                                        pointBorderColor: "rgba(123, 104, 238,1)",
                                        pointBackgroundColor: "#fff",
                                        pointBorderWidth: 1,
                                        pointHoverRadius: 5,
                                        pointHoverBackgroundColor: "rgba(75,192,192,1)",
                                        pointHoverBorderColor: "rgba(220,220,220,1)",
                                        pointHoverBorderWidth: 2,
                                        pointRadius: 1,
                                        pointHitRadius: 10,
                                        spanGaps: false,
                                        borderWidth: 1
                                    }]
                                },
                                options: {

                                    layout: {
                                        padding: {
                                            left: 0,
                                            right: 0,
                                            top: 0,
                                            bottom: 0
                                        }
                                    },
                                    responsive: true,
                                    maintainAspectRatio: false,
                                    scales: {
                                        xAxes: [
                                            {
                                                scaleLabel: {
                                                    display: true,
                                                    labelString: "Операторы",
                                                },

                                            }
                                        ],
                                        yAxes: [
                                            {
                                                scaleLabel: {
                                                    display: true,
                                                    labelString: "Общая длительность (часы)",
                                                },

                                            }
                                        ],
                                    }
                                }
                            });
                        </script>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">

        <div class="col-lg-4">
            <div class="card card-chart">
                <div class="card-body">
                    <div class="chart-area">
                        <h4 class="card-title"> &nbsp;Общая длительность
                            &nbsp;{{ (data_total_time[0]+data_total_time[1])|round(2) }} часов</h4>
                        <h4 class="card-title"> &nbsp;Общая длительность входящих
                            &nbsp;{{ (data_total_time[0])|round(2) }} часов</h4>
                        <h4 class="card-title"> &nbsp;Общая длительность исходящих
                            &nbsp;{{ (data_total_time[1])|round(2) }} часов</h4>
                        <h4 class="card-title"> &nbsp;Самый активный оператор &nbsp;{{ maxoper }}</h4>
                        <h4 class="card-title"> &nbsp;Самый ленивый оператор &nbsp;{{ minoper }}</h4>
                        <h4 class="card-title"> &nbsp;Счетчик пропущенных звонков &nbsp;{{ miss }} </h4>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="card card-chart">

                <div class="card-body">
                    <div class="chart-area">
                        <table width="90%">
                            <tr>
                                <td width="25%">
&nbsp;
                                </td>

                                <td width="25%">
                                    <canvas id="pie1" width="200" height="200"></canvas>
                                    <script>
                                        var ctx = document.getElementById('pie1').getContext('2d');
                                        var pie1 = new Chart(ctx, {
                                            type: 'pie',
                                            data: {
                                                labels: ['Входящие', 'Исходящие'],
                                                datasets: [{
                                                    label: '',
                                                    data: [{{ (data_total_time[0])|round(2) }}, {{ (data_total_time[1])|round(2) }}],
                                                    backgroundColor: [

                                                        'rgba(75, 192, 192, 0.2)',
                                                        'rgba(153, 102, 255, 0.2)',
                                                        'rgba(255, 159, 64, 0.2)'
                                                    ],
                                                    borderColor: [

                                                        'rgba(75, 192, 192, 1)',
                                                        'rgba(153, 102, 255, 1)',
                                                        'rgba(255, 159, 64, 1)'
                                                    ],
                                                    borderWidth: 1
                                                }]
                                            },
                                            options: {
                                                responsive: true,
                                                maintainAspectRatio: false,
                                                layout: {
                                                    padding: {
                                                        left: 0,
                                                        right: 0,
                                                        top: 0,
                                                        bottom: 0
                                                    },
                                                    animation: {
                                                        duration: 10
                                                    }
                                                },

                                                scales: {}
                                            }
                                        });
                                    </script>
                                </td>

                                <td width="25%">
&nbsp;
                                </td>


                                <td width="25%">
                                    <canvas id="miss" width="200" height="200"></canvas>
                                    <script>
                                        var ctx = document.getElementById('miss').getContext('2d');
                                        var miss = new Chart(ctx, {
                                            type: 'line',
                                            data: {
                                                labels: [{% for item in missgraph %} "{{item[0]}}",  {% endfor %}],
                                                datasets: [{
                                                    label: 'Пропущенные',
                                                    data: [{% for item in missgraph %} {{item[1]}}, {% endfor %}],
                                                    fill: true,
                                                    lineTension: 0.3,

                                                    borderColor: "rgba(106,34,255,1)",
                                                    borderCapStyle: 'butt',
                                                    borderDash: [],
                                                    borderDashOffset: 0.0,
                                                    borderJoinStyle: 'miter',
                                                    pointBorderColor: "rgba(75,192,192,1)",
                                                    pointBackgroundColor: "#fff",
                                                    pointBorderWidth: 1,
                                                    pointHoverRadius: 5,
                                                    pointHoverBackgroundColor: "rgba(75,192,192,1)",
                                                    pointHoverBorderColor: "rgba(220,220,220,1)",
                                                    pointHoverBorderWidth: 2,
                                                    pointRadius: 1,
                                                    pointHitRadius: 10,
                                                    spanGaps: false,
                                                    borderWidth: 1
                                                }]
                                            },
                                            options: {
                                                responsive: true,
                                                maintainAspectRatio: false,
                                                layout: {
                                                    padding: {
                                                        left: 0,
                                                        right: 0,
                                                        top: 0,
                                                        bottom: 0
                                                    },
                                                    animation: {
                                                        duration: 10
                                                    }
                                                },


                                            }
                                        });
                                    </script>
                                </td>


                            </tr>
                        </table>


                    </div>
                </div>
            </div>
        </div>
    </div>


{% endblock %}

{% block footer %}

{% endblock %}
